# 아티스트 펀딩 및 협업 플랫폼 전체 워크플로우

콜라보리움 플랫폼에서의 주요 사용자 유형과 권한 기반 플로우를 정리한 레퍼런스입니다. 비회원부터 관리자까지 각 역할이 어떤 여정을 거치는지, 어떤 예외 상황이 있는지를 종합적으로 다룹니다.

## 1. 사용자 유형별 기본 상태

| 역할 | 기본 권한 | 대표 목적 |
| --- | --- | --- |
| 게스트 (비회원) | 공개 정보 열람 | 프로젝트 탐색, 플랫폼 이해 |
| 회원 – 참여자 (PARTICIPANT) | 후원, 커뮤니티 참여 | 프로젝트 후원 및 소통 |
| 회원 – 아티스트 (CREATOR) | 프로젝트 생성/관리 | 프로젝트 기획, 펀딩 진행 |
| 파트너 (PARTNER) | 협업 제안/수락, 정산 확인 | 아티스트와 협업, 서비스 제공 |
| 관리자 (ADMIN) | 플랫폼 전반 운영 | 승인, 정산, 정책 관리 |

---

## 2. 게스트(비회원) 플로우

### 2.1 초기 상태
- 로그인하지 않은 사용자.
- 홈, 프로젝트 목록, 프로젝트 상세(스토리, 업데이트, 커뮤니티 등), FAQ/정책 페이지 등 공개 정보만 열람 가능.

### 2.2 주요 경로
- **프로젝트 둘러보기**: 검색/필터를 이용해 관심 프로젝트 탐색.
- **프로젝트 상세 열람**: 스토리, 진행 상황, 커뮤니티 글 열람 가능하나 댓글, 좋아요, 후원 등은 불가.

### 2.3 권한 전환 트리거
- 회원 전용 기능(후원, 댓글, 프로젝트 생성 등)을 클릭하면 로그인/회원가입 페이지로 리디렉션.
- 인증 완료 후 원래 작업 복귀 (예: 후원 버튼 클릭 → 로그인 → 결제 단계로 복귀).

### 2.4 예외 및 실패 처리
- `/dashboard` 등 회원 전용 URL 접근 시 로그인 페이지 또는 “권한 없음” 안내.
- 가입/로그인 중 오류(네트워크, 중복 이메일 등) 발생 시 재시도 안내.
- 약관/정책 미동의 시 가입 완료 불가.
- 결제 단계 진입 시 반드시 로그인 필요.

---

## 3. 회원 플로우 (참여자 & 아티스트)

### 3.1 공통 기능
- 프로필 관리(기본 정보, 이미지, 소개 수정).
- 알림센터에서 댓글/펀딩/팔로우 알림 확인.
- 후원한 프로젝트/주문 내역 조회.
- 커뮤니티 게시글/댓글 작성, 좋아요.
- 프로젝트/아티스트 팔로우 및 업데이트 알림 수신.

### 3.2 참여자(PARTICIPANT)
- 프로젝트 탐색, 리워드 선택 및 결제.
- 커뮤니티 댓글, 질문 작성.
- 굿즈/커머스 상품 구매, 주문/배송 추적.

#### 참여자 후원 시나리오
1. 프로젝트 상세 페이지에서 목표 금액, 남은 일자, 리워드 확인.
2. 후원 금액 또는 리워드 티어 선택 후 결제 진행 (Stripe/Toss/PayPal 등).
3. 결제 성공 시 `Funding.status = SUCCEEDED`, 프로젝트 `currentAmount` 즉시 반영.
4. 후원 완료 화면에서 커뮤니티 참여 안내, 마이페이지에서 후원 내역 확인.
5. 펀딩 종료 후 목표 달성 여부에 따라:
   - **성공**: 프로젝트 `SUCCESSFUL`, 이후 실행 단계로 진입.
   - **실패**: 프로젝트 `FAILED`, 모든 결제 `REFUNDED`, 커뮤니티 읽기 전용 전환.
6. 실행 단계에서 업데이트, 마일스톤 알림(`PROJECT_MILESTONE`) 수신.
7. 프로젝트 완료 시 `COMPLETED`, 리워드 수령 및 결과 공유 확인.

### 3.3 아티스트(CREATOR)
- 프로젝트 생성/관리 대시보드 접근.
- 프로젝트 기본 정보, 목표, 기간, 카테고리, 이미지, 리워드, 마일스톤 작성.
- 파트너 매칭 요청 관리.
- 업데이트, 로드맵, 정산 탭 접근.
- KPI 대시보드에서 성과 지표 확인.

#### 프로젝트 생성 및 운영 흐름
1. **프로젝트 생성**: 참여자가 “프로젝트 만들기”를 클릭하면 CREATOR 권한 부여 및 초안(DRAFT) 생성.
2. **초안 관리**: 미리보기, 임시 저장 가능.
3. **검수 제출**: 제출 시 상태 `REVIEWING`으로 변경, 관리자 승인 대기.
4. **승인 프로세스**:
   - 관리자 승인 시 `LIVE`로 공개, 펀딩 시작.
   - 반려 시 DRAFT로 회귀, 피드백 기반 수정.
5. **펀딩 중 관리**:
   - 실시간 모금 현황, 후원자 수 모니터링.
   - 커뮤니티 업데이트 게시.
   - 파트너 매칭 요청/응답 처리.
6. **파트너 협업**:
   - 파트너 요청 생성 (`PartnerMatch = REQUESTED`).
   - 파트너 수락 시 `ACCEPTED`, 계약 업로드(contractUrl), 지분(settlementShare) 확정.
   - 거절 시 `DECLINED`; 취소 시 `CANCELLED` 및 정산 재계산.
7. **펀딩 종료**:
   - 목표 달성 시 `SUCCESSFUL`, Settlement 데이터 생성 (`Settlement = PENDING`, 개별 `SettlementPayout = PENDING`).
   - 미달성 시 `FAILED`, 자동 환불.
8. **실행(EXECUTING)**: 예산 집행, 마일스톤 진행, 업데이트 공유.
9. **완료(COMPLETED)**: 결과물 제공, 최종 업데이트, 커뮤니티 소통 지속.
10. **정산**: 관리자가 지급 실행 → Settlement `PAID`, 정산 내역 및 알림(`SETTLEMENT_PAID`) 확인.
11. **사후 관리**: 후원자 피드백 수집, 커뮤니티 유지, KPI 반영.

### 3.4 공통 제약 & 예외
- 다른 아티스트 프로젝트 관리 기능 접근 불가.
- 프로젝트 `LIVE` 이후 핵심 정보 수정 제한(필요 시 재승인).
- 결제 실패 시 `Funding = PENDING/FAILED`, 재시도 안내.
- 한정 리워드 재고 소진 시 선택 불가, 결제 중 소진 시 안내 후 중단.
- 커뮤니티 위반 시 ModerationReport 생성, 제재 가능.

---

## 4. 파트너(PARTNER) 플로우

### 4.1 초기 상태
- 파트너 신청 후 관리자 승인(verified=true) 시 정식 활동 가능.
- 로그인 시 파트너 대시보드로 이동, 협업 요청/진행 프로젝트 확인.

### 4.2 핵심 기능
- 파트너 프로필 관리: 서비스 소개, 가격, 포트폴리오, 연락처, 가능 일정 업데이트.
- 프로젝트 탐색 & 제안: 파트너 모집 중인 프로젝트 필터링, 역제안 발송.
- 협업 요청 처리: 아티스트 요청 상세 확인, 수락/거절, 메시지 응답.
- 계약 관리: 계약서 업로드, settlementShare 설정.
- 정산 조회: 참여 프로젝트의 본인 몫 정산 상태 확인.
- 리뷰 관리: 아티스트 평점 확인, 서비스 품질 관리.

### 4.3 협업 요청 수락 시나리오
1. 협업 요청 알림 수신(`NotificationType.PARTNER_REQUEST`).
2. 요청 상세 검토 후 수락 시 상태 `ACCEPTED`, 견적(quote) 및 추가 조건 입력 가능.
3. 거절 시 `DECLINED`, 사유 전달.
4. 수락 후 프로젝트에 “진행 중 협업”으로 표시, 계약/일정 조율.
5. 서비스 제공 완료 시 `PartnerMatch = COMPLETED`(자동 또는 수동).
6. 정산 시 SettlementPayout 확인, 지급 수령.
7. 아티스트 평점 반영, 필요 시 피드백 제출.

### 4.4 파트너 제안 플로우
1. 파트너가 프로젝트 상세에서 “파트너로 제안하기” 선택.
2. 서비스, 견적, 메시지 작성 후 제안 → `PartnerMatch = REQUESTED`로 생성.
3. 아티스트가 ACCEPTED 하면 협업 성립, 이후 수락 플로우와 동일하게 진행.

### 4.5 파트너 등록 플로우
1. 신청서 제출: 회사/기관 정보, 분야, 소개, 연락처 등 입력.
2. 관리자 검토: 자료 검증 후 승인 시 PARTNER 역할 부여 및 verified=true.
3. 미승인 시 제한 안내(협업 요청 수락/발송 불가), 추가 자료 요청 가능.

### 4.6 경계 조건
- verified=false 상태에서 협업 액션 제한.
- 협업 취소 시 `PartnerMatch = CANCELLED`, 정산 대상에서 제외.
- 일정 충돌 시 수락 전/후 상황에 따라 취소 및 커뮤니케이션 필요.
- 정산 분쟁, 권한 위반 시 운영팀 중재/제재.

---

## 5. 관리자(ADMIN) 플로우

### 5.1 초기 상태
- ADMIN 권한으로 로그인, 관리자 대시보드 접근.
- 승인 대기 항목, KPI, 신고 현황 등 요약 정보 확인.

### 5.2 주요 업무
- **프로젝트 검수**: REVIEWING 상태 프로젝트 검토, 승인 시 LIVE, 반려 시 사유 전달.
- **파트너 검증**: 신규 파트너 승인/반려, verified 상태 관리.
- **콘텐츠 모니터링**: 커뮤니티 게시물, 신고(ModerationReport) 처리 (PENDING → REVIEWING → ACTION_TAKEN/DISMISSED).
- **정산 관리**: Settlement/SettlementPayout 검토, 지급 실행, 외부 결제 연동 또는 수동 처리 후 PAID 갱신.
- **데이터 검증**: Funding과 Settlement 데이터 일관성 점검.
- **회원/권한 관리**: 역할 변경, 계정 제재, 세부 권한(UserPermission) 설정.
- **공지/알림 발송**: NotificationType.SYSTEM 활용.
- **카테고리/정책 관리**: 카테고리, 금지어, 리워드 가이드라인 등 업데이트.
- **KPI 대시보드 분석**: 전체 성과 지표 모니터링.

### 5.3 운영 시나리오
- **프로젝트 승인**: 새 프로젝트 → 내용 검토 → 승인(LIVE) or 반려(DRAFT) → 피드백 제공.
- **파트너 승인**: 신청 → 자료 검토 → 승인(verified=true) 또는 추가 자료/거절.
- **신고 처리**: 신고 접수 → 콘텐츠/사용자 검토 → 조치(삭제, 제재) 및 상태 업데이트.
- **정산 지급**: 성공 프로젝트 완료 → 정산 데이터 확인 → 지급 실행 → Settlement `PAID`, 알림 발송.

### 5.4 경계 조건 및 예외
- 비관리자 `/admin` 접근 시 403 및 AuditLog 기록.
- 승인 지연 시 내부 알림으로 대응.
- 중요 작업(정산 등)은 2FA/재확인 절차 고려.
- 외부 결제 API 실패 시 경고 표시, 재시도/수동 처리.
- 정책 변경 시 사용자 공지 및 데이터 일관성 검증.
- 재해/긴급 상황 대비 SOP 마련, AuditLog로 모든 변경 추적.

---

## 6. 사용자 간 상호작용 & 공통 시스템

### 6.1 커뮤니티 & 알림
- 커뮤니티 게시판에서 글/댓글/좋아요.
- AMA, 이벤트 게시물(PostType.AMA 등)으로 질의응답 진행.
- 팔로우한 아티스트/프로젝트 업데이트, 댓글 활동 등에 대해 실시간 알림.

### 6.2 협업자 & 팀원
- 프로젝트 Collaborator로 초대된 회원은 내부 정보 공유 및 정산 몫 보유.
- 협업 완료 후 SettlementPayout으로 지분 수령.

### 6.3 Moderation
- 신고 발생 시 ModerationReport 생성 (PENDING → REVIEWING → ACTION_TAKEN/DISMISSED).
- 반복 위반자는 제재(일시 정지, 기능 제한 등) 적용, 기능 시도 시 안내 메시지.

### 6.4 데이터 무결성 & 오류 처리
- 시스템 에러 시 공용 오류 페이지 제공.
- 데이터 불일치 시 자동 검증 및 보정 프로세스 실행.
- AuditLog로 모든 주요 변경 추적, 백업/모니터링 정기 수행.

---

## 7. 상태 & 엔티티 요약

| 엔티티 | 주요 상태 |
| --- | --- |
| Project | DRAFT → REVIEWING → LIVE → (SUCCESSFUL/FAILED) → EXECUTING → COMPLETED |
| Funding | PENDING → SUCCEEDED / FAILED / REFUNDED |
| PartnerMatch | REQUESTED → ACCEPTED / DECLINED / CANCELLED / COMPLETED |
| Settlement | PENDING → PAID (필요 시 IN_PROGRESS, 재계산) |
| SettlementPayout | PENDING → PAID (취소 시 제외) |
| ModerationReport | PENDING → REVIEWING → ACTION_TAKEN / DISMISSED |

---

## 8. 디자인 & UX 고려 사항 (레퍼런스)

- **역할 기반 UI**: 헤더/내비게이션은 역할에 따라 동적으로 변경 (예: 아티스트: “내 프로젝트”, 참여자: “내 후원”, 파트너: “파트너 대시보드”).
- **권한 제한 표현**: 비회원이 회원 기능 접근 시 명확한 로그인 유도 모달, 권한 없음 페이지.
- **상태 피드백**: 각 단계에서 알림/배지/상태 표시로 진행 상황을 명확히 전달.
- **오류/예외 처리 UX**: 네트워크/결제 오류, 재고 소진 등 상황별 친절한 메시지와 재시도 경로 제공.
- **정책 및 가이드 고지**: 가입/프로젝트 생성 시 주요 정책 동의/가이드라인을 단계적으로 노출.
- **정산 투명성**: 정산 탭에서 플랫폼 수수료, 참여자/파트너 배분을 시각적으로 이해하기 쉽게 표현.

---

## 9. 활용 방법

- 신규 팀원이 전체 플로우를 빠르게 이해할 수 있는 온보딩 자료로 활용.
- 기능 추가/개선 시 각 역할별 영향 범위 파악에 참고.
- QA 시나리오, 정책 문서, UI 설계 등과 연계하여 일관된 사용자 경험 설계에 기초 자료로 사용.

