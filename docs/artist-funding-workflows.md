# 아티스트 펀딩 및 협업 플랫폼 전체 워크플로우

콜라보리움 플랫폼의 핵심 사용자 유형과 권한 기반 여정을 한눈에 파악할 수 있도록 정리한 문서입니다. 제품 기획, 디자인, 개발, 운영 팀이 공통 맥락을 공유하고 정책/기능 개선 시 참고할 수 있는 기준점으로 활용합니다.

## 목차
- [1. 문서 목적 & 범위](#1-문서-목적--범위)
- [2. 사용자 역할 요약](#2-사용자-역할-요약)
  - [2.1 역할별 권한 테이블](#21-역할별-권한-테이블)
  - [2.2 권한 전환 요약](#22-권한-전환-요약)
- [3. 핵심 엔티티 & 상태 전이](#3-핵심-엔티티--상태-전이)
- [4. 공통 시스템 & 인프라 고려](#4-공통-시스템--인프라-고려)
- [5. 게스트(비회원) 여정](#5-게스트비회원-여정)
- [6. 회원 공통 경험](#6-회원-공통-경험)
- [7. 참여자(PARTICIPANT) 여정](#7-참여자participant-여정)
- [8. 아티스트(CREATOR) 여정](#8-아티스트creator-여정)
- [9. 파트너(PARTNER) 여정](#9-파트너partner-여정)
- [10. 관리자(ADMIN) 여정](#10-관리자admin-여정)
- [11. 교차 롤 상호작용 & 알림](#11-교차-롤-상호작용--알림)
- [12. 문서 활용 가이드](#12-문서-활용-가이드)

---

## 1. 문서 목적 & 범위
- 사용자 유형별(게스트, 참여자, 아티스트, 파트너, 관리자) 핵심 여정과 권한 기반 정책을 정리합니다.
- 결제/정산, 파트너 매칭, 커뮤니티, 모더레이션 등 도메인 간 의존 관계를 명확히 파악합니다.
- 신규 기능 정의, QA 시나리오 도출, 정책 변경 시 영향도 분석에 참고합니다.

---

## 2. 사용자 역할 요약

### 2.1 역할별 권한 테이블
| 역할 | 기본 권한 | 대표 목적 | 핵심 페이지 |
| --- | --- | --- | --- |
| 게스트 (비회원) | 공개 정보 열람 | 프로젝트 탐색, 플랫폼 이해 | 홈, 프로젝트 목록/검색, 프로젝트 상세(스토리/업데이트/커뮤니티 열람) |
| 참여자 (PARTICIPANT) | 후원, 커뮤니티 참여 | 프로젝트 후원 및 소통 | 마이페이지(후원 내역), 결제 플로우, 커뮤니티, 상점/주문 |
| 아티스트 (CREATOR) | 프로젝트 생성·관리 | 프로젝트 기획, 펀딩 진행 | 프로젝트 대시보드, 리워드/마일스톤 설정, 정산 탭 |
| 파트너 (PARTNER) | 협업 제안·수락, 정산 확인 | 아티스트 협업, 서비스 제공 | 파트너 대시보드, 협업 요청, 계약 관리 |
| 관리자 (ADMIN) | 플랫폼 운영 전반 | 승인, 정산, 정책 관리 | 관리자 대시보드, 프로젝트 검수, 파트너 검증, 신고 처리 |

### 2.2 권한 전환 요약
| 트리거 | 전환 전 | 전환 후 | 메모 |
| --- | --- | --- | --- |
| 회원가입 완료 | 게스트 | 참여자 | 기본 역할, 후원/커뮤니티 참여 가능 |
| 프로젝트 만들기 진입 | 참여자 | 아티스트 | 초안(DRAFT) 생성과 동시에 CREATOR 권한 부여 |
| 파트너 신청 승인 | 참여자 | 파트너 | Partner.verified=true 설정 시 액션 활성화 |
| 관리자 권한 부여 | 기존 역할 | 관리자 | User.role=ADMIN, 세부 권한은 UserPermission으로 분기 |

---

## 3. 핵심 엔티티 & 상태 전이
| 엔티티 | 주요 상태 흐름 | 비고 |
| --- | --- | --- |
| Project | DRAFT → REVIEWING → LIVE → (SUCCESSFUL / FAILED) → EXECUTING → COMPLETED | LIVE 이후 핵심 정보 변경 제한, 실패 시 커뮤니티 읽기 전용 |
| Funding | PENDING → SUCCEEDED / FAILED / REFUNDED | 결제 실패·취소 시 PENDING/FAILED 유지, 목표 미달 시 자동 REFUNDED |
| PartnerMatch | REQUESTED → ACCEPTED / DECLINED / CANCELLED / COMPLETED | 협업 취소 시 CANCELLED, 완료 시 COMPLETED |
| Settlement | PENDING → (IN_PROGRESS) → PAID | 오류·보류 시 IN_PROGRESS 유지, 재계산 가능 |
| SettlementPayout | PENDING → PAID | 파트너/협업자별 정산 내역, 취소 시 제외 |
| ModerationReport | PENDING → REVIEWING → ACTION_TAKEN / DISMISSED | 위반 조치 시 ACTION_TAKEN, 허위 신고는 DISMISSED |

---

## 4. 공통 시스템 & 인프라 고려
- **알림(Notification)**: 팔로우, 후원, 파트너 요청, 정산 등 주요 이벤트에 대해 실시간/배치 알림 제공.
- **커뮤니티**: 프로젝트별 게시판, AMA, 댓글/좋아요. 신고 시 ModerationReport로 연계.
- **결제/정산**: Stripe/Toss/PayPal 등 결제 게이트웨이 사용. 모금액은 정산 전까지 보류 금액(pendingBalance)으로 관리.
- **모니터링 & 로그**: AuditLog로 중요 이벤트 추적, 정기 백업/일관성 검증 프로세스 운영.
- **정책/약관**: 가입 및 프로젝트 생성 시 필수 동의, 정책 변경 시 공지.

---

## 5. 게스트(비회원) 여정
### 5.1 엔트리 포인트
- 로그인하지 않은 상태에서 홈 또는 외부 공유 링크 진입.
- 공개 콘텐츠(프로젝트 리스트, 상세, FAQ 등)에 접근 가능.

### 5.2 주요 페이지 & 기능
- 프로젝트 검색/필터링, 상세 스토리 및 업데이트 열람.
- 커뮤니티 글은 읽기만 가능(작성/좋아요 제한).

### 5.3 권한 전환 트리거
- 후원/댓글/프로젝트 생성 등 회원 전용 버튼 클릭 시 로그인/회원가입 모달로 전환.
- 인증 완료 후 원래 작업(예: 결제 플로우)으로 복귀.

### 5.4 실패/예외 처리
- 회원 전용 URL 접근 시 로그인 페이지 또는 “권한 없음” 메시지.
- 가입 중 네트워크 오류, 중복 이메일, 약관 미동의 시 오류 안내 후 재시도.
- 결제 단계 진입에는 필수적으로 로그인 요구.

### 5.5 UX 메모
- 로그인 유도 모달에서 혜택/기대값 명확히 표기.
- 접근 제한 시 친절한 메시지 및 CTA 제공.

---

## 6. 회원 공통 경험
### 6.1 공통 기능
- 프로필 정보/이미지/소개 수정, 알림센터 확인.
- 마이페이지에서 후원, 주문, 알림 내역 조회.
- 커뮤니티 글 작성, 댓글, 좋아요, 프로젝트/아티스트 팔로우.
- 팔로우 대상의 신규 프로젝트/업데이트 알림 수신.

### 6.2 인증 & 보안 고려
- 세션 유지, 2FA 옵션, RBAC 서버 검증 필수.
- 권한 없는 기능은 UI에서 비노출 또는 비활성화 처리.

---

## 7. 참여자(PARTICIPANT) 여정
### 7.1 핵심 플로우 요약
| 단계 | 설명 | 시스템 처리 |
| --- | --- | --- |
| 탐색 | 프로젝트 목록/상세에서 정보 확인 | 필터, 정렬, 추천 알고리즘 |
| 후원 결정 | 금액 또는 리워드 티어 선택 | 재고 검증, 결제 창 호출 |
| 결제 | Stripe/Toss/PayPal 등 결제 진행 | Funding 생성(PENDING) → 성공 시 SUCCEEDED |
| 참여 확정 | 후원 완료 화면/알림 | 프로젝트 currentAmount 갱신, 참여 내역 노출 |
| 진행 추적 | 업데이트/마일스톤 확인 | NotificationType.PROJECT_MILESTONE 발송 |
| 종료 & 리워드 | 프로젝트 성공 시 리워드 수령, 실패 시 환불 | SUCCESSFUL → EXECUTING → COMPLETED, 실패 시 REFUNDED |

### 7.2 결제 & 주문 디테일
- SUCCEEDED 시 Funding 레코드가 프로젝트 누적 금액에 반영.
- 결제 실패/취소 시 상태 PENDING/FAILED로 유지하고 사용자에게 재시도 옵션 제공.
- 굿즈/상품 구매 시 재고 감소 및 주문/배송 추적 기능 연계.

### 7.3 경계 조건
- 한정 리워드 품절 시 선택 불가, 결제 중 품절되면 안내 후 취소.
- 프로젝트 실패 시 자동 환불 및 커뮤니티 읽기 전용 전환.
- 커뮤니티 가이드 위반 시 ModerationReport 생성 및 제재.

### 7.4 UX 메모
- 후원 완료 후 다음 행동(커뮤니티 참여, 공유 등) CTA 제공.
- 환불/실패 시 명확한 알림과 감정 케어 문구 필요.

---

## 8. 아티스트(CREATOR) 여정
### 8.1 권한 획득 & 초기 세팅
- 참여자가 “프로젝트 만들기” 클릭 시 CREATOR 권한 부여 및 DRAFT 생성.
- 필요 시 추가 검증(프로필 보완, 신원 확인) 요구 가능.

### 8.2 프로젝트 라이프사이클
1. **초안 작성(DRAFT)**: 기본 정보, 목표 금액, 기간, 카테고리, 대표 이미지, 리워드/마일스톤 입력. 임시 저장/미리보기 지원.
2. **검수 제출(REVIEWING)**: 제출 시 관리자 승인 대기. 수정 가능하나 공개 불가.
3. **승인 & 공개(LIVE)**:
   - 승인 시 즉시 공개, 팔로워에게 신규 프로젝트 알림 발송.
   - 반려 시 DRAFT로 회귀, 피드백 기반 수정.
4. **펀딩 운영**:
   - 모금 현황 및 후원자 수 실시간 모니터링.
   - 커뮤니티 업데이트 게시, FAQ 관리.
   - 파트너 매칭 요청/응답 관리.
5. **파트너 협업**:
   - PartnerMatch 생성(REQUESTED), 파트너 수락 시 ACCEPTED.
   - 계약서(contractUrl) 업로드, settlementShare 확정.
   - 협업 중단 시 CANCELLED 처리 및 정산 재계산.
6. **펀딩 종료**:
   - 목표 달성 시 SUCCESSFUL, Settlement/SettlementPayout(PENDING) 생성.
   - 미달성 시 FAILED, 자동 환불.
7. **실행(EXECUTING)**: 확보 예산으로 프로젝트 수행, 마일스톤 진행, 알림 발송.
8. **완료(COMPLETED)**: 결과물 제공, 최종 업데이트, 커뮤니티 유지.
9. **정산**: 관리자 지급 실행 시 Settlement/SettlementPayout이 PAID로 업데이트되고 알림(NotificationType.SETTLEMENT_PAID) 전달.
10. **사후 관리**: 후원자 피드백 수집, KPI 대시보드에서 성과 확인.

### 8.3 경계 조건 & 예외
- LIVE 이후 핵심 정보(목표 금액 등) 수정 제한, 필요 시 관리자 재승인.
- 파트너 취소 시 정산 몫 재계산, 일정 시점 이후 취소 제한 가능.
- 권한 없는 프로젝트 접근 시 403 처리.

### 8.4 UX 메모
- 대시보드에서 목표 대비 진행률, 마일스톤, 파트너 상태를 시각적으로 제공.
- 정산 탭에서 플랫폼 수수료·협업자 몫을 투명하게 표시.

---

## 9. 파트너(PARTNER) 여정
### 9.1 초기 상태
- 파트너 신청 후 관리자 승인(Partner.verified=true) 시 정식 활동 가능.
- 로그인 시 파트너 대시보드로 진입하여 협업 요청/진행 중 프로젝트 확인.

### 9.2 핵심 기능
- 프로필 관리: 서비스 소개, 가격 모델, 포트폴리오, 연락처, 가능 일정 업데이트.
- 프로젝트 탐색: 파트너 모집 필터, 추천 프로젝트 확인.
- 협업 요청 처리: 아티스트 요청 수락/거절, 메시지 응답.
- 계약/정산 관리: 계약서 업로드, settlementShare 설정, SettlementPayout 상태 조회.
- 리뷰 관리: 아티스트 평점 모니터링, 서비스 품질 유지.

### 9.3 시나리오
| 시나리오 | 단계 | 결과 |
| --- | --- | --- |
| 협업 요청 수락 | 알림 수신 → 상세 검토 → ACCEPTED (quote/조건 입력) | 파트너 매칭 완료, 프로젝트에 공개 표시 |
| 협업 제안 발송 | 프로젝트 상세 → “파트너로 제안하기” → 요청 생성(REQUESTED) | 아티스트가 수락 시 협업 성립 |
| 서비스 제공 & 완료 | 일정 조율 → 서비스 제공 → COMPLETED | 정산 시 SettlementPayout 확인 |

### 9.4 경계 조건
- verified=false 상태에서는 협업 액션 제한 및 안내 메시지 노출.
- 일정 충돌, 협업 취소 시 CANCELLED 처리 및 커뮤니케이션 필요.
- 정산 분쟁 시 운영팀 중재, 필요 시 Moderation/AuditLog 기록.

### 9.5 UX 메모
- 승인 대기 상태에서는 비활성화 상태 표시와 진행 상황 안내.
- 다중 요청 관리 UI(캘린더/태그)로 일정 충돌 방지.

---

## 10. 관리자(ADMIN) 여정
### 10.1 초기 상태
- ADMIN 권한 로그인 시 관리자 대시보드 접근.
- 승인 대기 항목, KPI, 신고 현황 등 요약 카드 제공.

### 10.2 주요 업무
- 프로젝트 검수: REVIEWING → 승인(LIVE) 또는 반려(DRAFT) 및 피드백 전달.
- 파트너 검증: 신규 프로필 승인/반려, verified 상태 관리.
- 콘텐츠 모니터링: ModerationReport(PENDING → REVIEWING → ACTION_TAKEN/DISMISSED) 처리, 제재 실행.
- 정산 관리: Settlement/SettlementPayout 검토, 지급 실행(외부 결제 연동 또는 수동) 후 PAID 업데이트.
- 데이터 검증: Funding vs Settlement 일관성 점검, 오류 시 보정.
- 회원/권한 관리: 역할 변경, 계정 제재, UserPermission 설정.
- 공지/알림: NotificationType.SYSTEM 사용.
- 정책/카테고리 관리: 금지어, 리워드 가이드라인, 카테고리 업데이트.
- KPI 분석: 전체 성과 지표 모니터링 및 보고.

### 10.3 운영 시나리오
- **프로젝트 승인**: 새 프로젝트 알림 → 내용 검토 → 승인(LIVE) or 반려(DRAFT) → 피드백 전달.
- **파트너 승인**: 신청 → 자료 검토 → 승인(verified=true) 또는 추가 자료 요청/거절.
- **신고 처리**: 신고 접수 → 콘텐츠 검토 → 조치(삭제/제재) → 상태 업데이트.
- **정산 지급**: 성공 프로젝트 완료 → 정산 데이터 확인 → 지급 실행 → Settlement/SettlementPayout PAID → 알림 발송.

### 10.4 경계 조건 & 보안
- 비관리자의 `/admin` 접근 시 403 처리 및 AuditLog 기록.
- 정산, 권한 변경 등 중요 작업은 2FA/재확인 절차 고려.
- 외부 결제 API 실패 시 경고 표시 및 재시도/수동 처리 경로 제공.
- 재해/긴급 상황 대응을 위한 SOP 문서화, AuditLog로 모든 변경 추적.

---

## 11. 교차 롤 상호작용 & 알림
- **커뮤니티 상호작용**: 참여자·아티스트·파트너 모두 게시글/댓글 가능(정책 범위 내). 신고 시 ModerationReport 생성.
- **협업자 초대**: 아티스트는 Collaborator를 초대하여 내부 정보 공유 및 정산 몫 배분 가능.
- **알림 유형**: 프로젝트 마일스톤, 파트너 요청/응답, 정산 지급, 시스템 공지 등 이벤트별 NotificationType 정의.
- **정산 분배**: Settlement를 통해 플랫폼 수수료, 아티스트, 파트너, 협업자에게 몫 배분. 분쟁 시 관리자 중재.
- **데이터 무결성**: 자동 검증 및 백업 프로세스로 Funding ↔ Settlement 불일치 시 보정.

---

## 12. 문서 활용 가이드
- 신규 팀원의 온보딩 자료로 사용하여 역할별 책임과 정책을 빠르게 이해시킵니다.
- 기능 개선/추가 시 영향을 받는 사용자와 상태 전이를 빠르게 파악합니다.
- QA/테스트 케이스, 정책 문서, UI 플로우 설계 등과 연계하여 일관된 사용자 경험을 설계합니다.
- 업데이트 필요 시, 변경사항을 본 문서에 반영하고 관련 팀에 공지합니다.
